<script lang="ts">
  import ShareButton from './ShareButton.svelte';
  import type { HTMLAnchorAttributes } from 'svelte/elements';

  interface Props extends Omit<HTMLAnchorAttributes, 'class' | 'href' | 'target' | 'rel' | 'aria-label'> {
    text: string;
    url: string;
    instance?: string;
    ariaLabel?: string;
    class?: string;
  }

  let { text, url, instance = 'mastodon.social', ariaLabel = 'Share on Mastodon', class: classes = '', ...restProps }: Props = $props();

  let href = $derived(encodeURI(`https://${instance}/share?text=${text} ${url}`));
</script>

<style>
:global(.ssbc-button--mastodon) {
  background-color: #6364FF;
}

:global(.ssbc-button--mastodon:active),
:global(.ssbc-button--mastodon:hover) {
  background-color: #563ACC;
}
</style>

<ShareButton class="ssbc-button--mastodon {classes}" {...restProps} {ariaLabel} {href}>
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 74 79">
    <path d="M73.7014 17.9592C72.5616 9.62034 65.1774 3.04876 56.424 1.77536C54.9472 1.56019 49.3517 0.7771 36.3901 0.7771H36.2933C23.3281 0.7771 20.5465 1.56019 19.0697 1.77536C10.56 3.01348 2.78877 8.91838 0.903306 17.356C-0.00357857 21.5113 -0.100361 26.1181 0.068112 30.3439C0.308275 36.404 0.354874 42.4535 0.91406 48.489C1.30064 52.498 1.97502 56.4751 2.93215 60.3905C4.72441 67.6217 11.9795 73.6299 19.0876 76.0462C26.6979 78.5743 34.8821 79.0029 42.724 77.2929C43.5866 77.1036 44.4398 76.8745 45.2833 76.6067C47.1867 75.9994 49.4049 75.2762 51.0839 74.0841C51.1038 74.0689 51.1198 74.0492 51.1307 74.0266C51.1416 74.0039 51.147 73.9788 51.1466 73.9535V68.1909C51.1467 68.169 51.1421 68.1473 51.1332 68.1272C51.1243 68.1072 51.1113 68.0893 51.095 68.0747C51.0788 68.0601 51.0596 68.0491 51.0389 68.0426C51.0## 68.036 50.996 68.0339 50.975 68.0365C45.6629 69.1841 40.2417 69.7698 34.8021 69.7833C25.5691 69.7833 23.134 65.3509 22.4567 63.6306C21.9152 62.2028 21.5765 60.7044 21.4511 59.1796C21.4498 59.1561 21.454 59.1326 21.4634 59.1109C21.4728 59.0892 21.4871 59.0698 21.5052 59.0542C21.5234 59.0385 21.5449 59.0271 21.5681 59.0206C21.5913 59.0141 21.6156 59.0127 21.6395 59.0165C26.8961 60.1569 32.2651 60.7341 37.6481 60.7405C38.7048 60.7405 39.7581 60.7405 40.8146 60.7298C49.8516 60.4743 59.3505 60.0162 68.1733 57.7298C68.3963 57.6671 68.6163 57.6013 68.8329 57.5765C76.1291 55.8693 83.0839 49.8015 83.8874 37.4823C83.9198 36.9008 84.0023 32.1462 84.0023 31.5431C84.0047 29.8343 88.7579 17.0146 73.7014 17.9592Z M61.4747 27.7278V51.0657H53.0857V28.3894C53.0857 24.0458 51.4126 21.8371 47.9474 21.8371C44.1291 21.8371 42.2159 24.4289 42.2159 29.5455V42.1309H33.8654V29.5455C33.8654 24.4289 31.9488 21.8371 28.1306 21.8371C24.6984 21.8371 23.0219 24.0458 23.0219 28.3894V51.0657H14.6329V27.7278C14.6329 23.3842 15.7316 19.9624 17.9289 17.4708C20.1897 14.9776 23.1255 13.6962 26.7463 13.6962C30.9366 13.6962 34.0889 15.2879 36.1523 18.4713L38.0655 21.6945L39.9788 18.4713C42.0421 15.2879 45.1944 13.6962 49.3782 13.6962C52.9989 13.6962 55.9382 14.9776 58.1989 17.4708C60.3997 19.9608 61.4747 23.3826 61.4747 27.7278Z"/>
  </svg>
</ShareButton>

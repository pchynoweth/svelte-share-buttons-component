<script lang="ts">
  import ShareButton from './ShareButton.svelte';
  import type { HTMLAnchorAttributes } from 'svelte/elements';

  interface Props extends Omit<HTMLAnchorAttributes, 'class' | 'href' | 'target' | 'rel' | 'aria-label'> {
    text: string;
    url: string;
    instance?: string;
    ariaLabel?: string;
    class?: string;
  }

  let { text, url, instance = 'mastodon.social', ariaLabel = 'Share on Mastodon', class: classes = '', ...restProps }: Props = $props();

  let href = $derived(`https://${encodeURIComponent(instance)}/share?text=${encodeURIComponent(text + ' ' + url)}`);
</script>

<style>
:global(.ssbc-button--mastodon) {
  background-color: #6364FF;
}

:global(.ssbc-button--mastodon:active),
:global(.ssbc-button--mastodon:hover) {
  background-color: #563ACC;
}
</style>

<ShareButton class="ssbc-button--mastodon {classes}" {...restProps} {ariaLabel} {href}>
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75 79">
    <path d="M73.7014 17.4323C72.5616 9.05152 65.1774 2.4753 56.424 1.20615C54.9472 0.991458 49.3518 0.205078 36.3901 0.205078H36.2933C23.3281 0.205078 20.5465 0.991458 19.0697 1.20615C10.56 2.44031 2.78877 8.3532 0.903306 16.8098C-0.00357854 21.0128 -0.100361 25.6676 0.068112 29.9396C0.308275 36.0679 0.354874 42.1861 0.91406 48.2903C1.30064 52.3426 1.97502 56.3618 2.93215 60.3179C4.72441 67.6282 11.9795 73.6704 19.0876 76.1101C26.6979 78.6613 34.8821 79.0909 42.724 77.3623C43.5866 77.1727 44.4398 76.9414 45.2833 76.6697C47.1867 76.0564 49.4049 75.3259 51.0839 74.1232C51.1038 74.1078 51.1198 74.0879 51.1307 74.0652C51.1416 74.0424 51.147 74.0172 51.1466 73.9918V68.1554C51.1467 68.1334 51.1421 68.1116 51.1332 68.0913C51.1243 68.0711 51.1113 68.0532 51.095 68.0385C51.0787 68.0238 51.0596 68.0127 51.0389 68.0062C51.0182 67.9996 50.996 67.9975 50.9743 68.0001C45.6629 69.1539 40.2417 69.7421 34.8021 69.7558C25.5691 69.7558 23.134 65.2894 22.4567 63.5573C21.9152 62.118 21.5765 60.6063 21.4511 59.0677C21.4498 59.0441 21.454 59.0205 21.4634 58.9988C21.4728 58.977 21.4871 58.9575 21.5052 58.9418C21.5233 58.9261 21.5449 58.9146 21.5681 58.9081C21.5913 58.9016 21.6156 58.9002 21.6395 58.9039C26.8961 60.0556 32.2651 60.6356 37.6481 60.6421C38.7048 60.6421 39.7581 60.6421 40.8146 60.6313C49.8516 60.3723 59.3505 59.9085 68.1733 57.5979C68.3963 57.5355 68.6163 57.4693 68.8329 57.4444C76.1291 55.7193 83.0839 49.5951 83.8874 37.119C83.9198 36.533 84.0023 31.7277 84.0023 31.1193C84.0047 29.3918 88.7579 16.4534 73.7014 17.4323ZM61.4747 27.1437V50.5012H53.0857V27.8056C53.0857 23.4392 51.4126 21.2189 47.9474 21.2189C44.1291 21.2189 42.2159 23.826 42.2159 28.9803V41.5691H33.8654V28.9803C33.8654 23.826 31.9488 21.2189 28.1306 21.2189C24.6984 21.2189 23.0219 23.4392 23.0219 27.8056V50.5012H14.6329V27.1437C14.6329 22.7772 15.7316 19.3315 17.9289 16.8276C20.1897 14.3234 23.1255 13.0347 26.7463 13.0347C30.9366 13.0347 34.0889 14.6369 36.1523 17.8408L38.0655 21.1252L39.9788 17.8408C42.0421 14.6369 45.1944 13.0347 49.3782 13.0347C52.9989 13.0347 55.9382 14.3234 58.1989 16.8276C60.3997 19.33 61.4747 22.7757 61.4747 27.1437Z"/>
  </svg>
</ShareButton>
